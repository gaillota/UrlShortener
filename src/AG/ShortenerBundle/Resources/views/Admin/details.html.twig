{% extends '@AGShortener/layout.html.twig' %}

{% block breadcrumbs %}
    {{ parent() }}
    <li><a href="{{ path('ag_shortener_admin') }}">Administration</a></li>
    <li class="active">DÃ©tails</li>
{% endblock %}

{% block ag_shortener_content %}
    {% include 'AGShortenerBundle:User:details_content.html.twig' %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="{{ asset('js/highcharts_theme.js') }}"></script>
    <script type="text/javascript">
        $(function () {
            $('#chart_container').highcharts({
                chart: {
                    type: 'line'
                },
                title: {
                    text: 'Analytics'
                },
                xAxis: {
                    type: 'datetime',
                    dateTimeLabelFormats: {
                        day: '%e %b',
                        week: '%e %b',
                        month: '%b %Y'
                    }
//                    categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: ''
                    }
                },
                plotOptions: {
                    line: {
                        dataLabels: {
                            enabled: true
                        },
                        enableMouseTracking: true
                    }
                },
                series: [{
                    name: 'Clics',
                    pointInterval: 24 * 3600 * 1000,
                    pointStart: Date.UTC({{ chartData.chartStart|date('Y, m-1, d') }}),
                    tooltip: {
                        dateTimeLabelFormats: {day:"%e %B %Y"},
                        valueDecimals: 0,
                        valueSuffix: ' clics'
                    },
                    data: [{{ chartData.clicks }}]
                }, {
                    name: 'Scans',
                    pointInterval: 24 * 3600 * 1000,
                    pointStart: Date.UTC({{ chartData.chartStart|date('Y, m-1, d') }}),
                    tooltip: {
                        dateTimeLabelFormats: {day:"%e %B %Y"},
                        valueDecimals: 0,
                        valueSuffix: ' scans'
                    },
                    data: [{{ chartData.scans }}]
                }]
            });
        });
    </script>
{% endblock %}